#!/bin/bash

GITURL=https://github.com/Biggybi/dotfiles
SRC=~/.dotfiles
DST=~
BACKUP=~/.dotfiles/dots_back
FILES=".vimrc\
	.bashrc\
	.bash_aliases"

LINK=$FILES

if [[ "$OSTYPE" == "darwin"* ]]
then
	LINK=(.vimrc\
		.bash_profile\
		.bash_aliases)
fi

if [ -d $SRC ]
then
	echo "Not cloning : $SRC exists"
else
	git clone $GITURL $SRC
fi

i = 0
for f in $FILES
do
	l=${LINK[i]}
	if [ -e $SRC/$l ]
	then
		if [ -L $DST/$l ]
		then
			echo "$l : link deleted"
			rm $DST/$l
		elif [ -f $DST/$l ]
		then
			mv $DST/$l $BACKUP
			echo $l : saved in $BACKUP
		fi
		ln -s $SRC/$f $DST/$l
		echo "$l -> $f : File linked"
	else
		echo "$l : No such file"
	fi
	let i=i+1
done
